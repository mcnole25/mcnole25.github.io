<!DOCTYPE html>
<html>
  <head>
    <title>Feels Like Temperature</title>
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
    <style>
        body {background-color: #222; position: relative; left: 10px; width: 90vw; height: 90vh;}
        a, h1, p, span {color: #fff; font-family: verdana;}
        input {margin: 4px 0px};
    </style>
  </head>
  <body>
        <h1>Feels Like Temperature (Fixed)</h1>
        <p>Estimate either the heat index or the wind chill using simple formulas.</p>
        <span>Air Temperature: </span><input type=number id="temperature" value=25><span> &deg;C<br></span>
        <span>Humidity: </span><input type=number id="humidity" value=50><span> %<br></span>
        <span>Wind Speed: </span><input type=number id="windSpeed" value=0><span> km/h<br><br></span>
        <span id="feelsLike" style="font-size:150%"></span>
        <script>
            setInterval(function() {
                const c = [-42.379, 2.04901523, 10.14333127, -0.22475541, -0.00683783, -0.05481717, 0.00122874, 0.00085282, -0.00000199];
                let t = Number(temperature.value) * 1.8 + 32;
                let rh = Number(humidity.value);
                let v = Number(windSpeed.value) / 1.609344;
                if (t < 80) {
                    hi = 0.5 * (t + 61.0 + ((t - 68) * 1.2) + (rh * 0.094));
                } else {
                hi = c[0] + c[1] * t + c[2] * rh + c[3] * t * rh + c[4] * t ** 2 + c[5] * rh ** 2 + c[6] * t ** 2 * rh + c[7] * t * rh ** 2 + c[8] * t ** 2 * rh ** 2;
                if (rh < 13 && t >= 80 && t <= 112) {
                    hi += ((13 - rh) / 4) * Math.sqrt((17 - Math.abs(t - 95)) / 17);
                }
                if (rh > 85 && t >= 80 && t <= 87) {
                    hi += ((rh - 85) / 10) * ((87 - t) / 5);
                }
                }
                let wc = 35.74 + 0.6215 * t - 35.75 * v ** 0.16 + 0.4275 * t * v ** 0.16;
                if (v < 3 || t > 68) {
                    wc = hi;
                }
                final = ((hi - 32) / 1.8 + (wc - 32) / 1.8) / 2;
                if (temperature.value < -273) {
                feelsLike.innerHTML = "Temperature cannot be below absolute zero!";
                } else if (temperature.value > 1.42e32) {
                feelsLike.innerHTML = "Temperature cannot exceed planck temperature!";
                } else {
                if (humidity.value < 0) {
                feelsLike.innerHTML = "Humidity cannot be negative!";
                } else if (humidity.value > 100) {
                feelsLike.innerHTML = "Humidity cannot exceed 100%!";
                } else {
                if (windSpeed.value < 0) {
                feelsLike.innerHTML = "Wind cannot be negative!";
                } else if (windSpeed.value > 1079252848.8) {
                feelsLike.innerHTML = "Wind cannot be faster than light!";
                } else {
                feelsLike.innerHTML = "Feels Like: " + Math.round(final) + "&#176;C";
                }
                }
                }
                if (feelsLike.innerHTML.includes("Feels Like")) {
                message = "✅ There is no risk.";
                if (final < 10) {message = "🆗 Shivering is possible.";}
                if (final < -20) {message = "❗ Frostbite is possible.";}
                if (final < -40) {message = "🆘 Frostbite is likely!";}
                if (final > 25) {message = "🆗 Fatigue is possible.";}
                if (final > 30) {message = "❗ Heat exaustion is possible.";}
                if (final > 40) {message = "❕ Heat stroke is possible.";}
                if (final > 50) {message = "🆘 Heat stroke is likely!";}
                } else {
                message = "";
                }
                feelsLike.innerHTML = feelsLike.innerHTML + "<br>" + message;
            });
        </script>
  </body>
</html>
